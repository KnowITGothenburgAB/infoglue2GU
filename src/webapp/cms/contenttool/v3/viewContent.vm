#define( $headerMarkup )

	<link rel="stylesheet" type="text/css" href="css/cms.css" />
	<link rel="stylesheet" type="text/css" href="applications/jscalendar/skins/aqua/theme.css" />
	<script type="text/javascript" src="applications/jscalendar/calendar.js"></script>
	<script type="text/javascript" src="applications/jscalendar/lang/calendar-en.js"></script>
	<script type="text/javascript" src="applications/jscalendar/calendar-setup.js"></script>

	<script type="text/javascript">
	<!--
	
		function save()
		{
			document.editForm.submit();
		}
	-->
	</script>
#end

#beginLightCommonToolV3Impl("tool.contenttool.contentHeader" "$!contentId" "contentId=$!contentId" false true $!disableCloseButton $headerMarkup)

	##lightMenuToolbar("" $buttons $rightButtons) 

	<div style="clear: both;"></div>

	<form method="POST" name="editForm" action="UpdateContent!v3.action">
		<input type="hidden" name="contentId" value="$!contentId">
		<input type="hidden" name="isBranch" value="$!isBranch">
		<input type="hidden" name="unrefreshedContentId" value="$!contentId">
		<input type="hidden" name="repositoryId" value="$!repositoryId">
		<input type="hidden" name="changeTypeId" value="1">
		
		<div id="igEditArea" class="igScrollArea" onfocus="this.blur();">

				<p>
					#editTextFieldCSS("Content.name" "name" $formatter.escapeHTML($!name) "30" true false "longtextfield")
				</p>
				
				#if($enableDateTimeDirectEditing == "true")
					#set($dateReadonly = "")
				#else
					#set($dateReadonly = "readonly")
				#end
				
				<p>
					#editDateField("Content.publishDateTime" "publishDateTime" $!publishDateTime "30" "date" "ViewCalendar.action?date=$!publishDateTimeAsLong&formPath=document.editForm.publishDateTime" "$dateReadonly")
				</p>
				<p>
					#editDateField("Content.expireDateTime" "expireDateTime" $!expireDateTime "30" "date" "ViewCalendar.action?date=$!expireDateTimeAsLong&formPath=document.editForm.expireDateTime" "$dateReadonly")
				</p>		
			
				<p>
					$ui.getString("tool.contenttool.lastUpdatedByLabel") $contentVO.creatorName <br/>Content ID: $contentVO.id
				</p>

				<p> 
					#set($isProtectedReadonly = "")
					#set($protectedContentId = $!this.getProtectedContentId($contentId))
					#set($isModifier = ($contentVO.creatorName == $infoGluePrincipal.name))
					#if($protectedContentId && !$isModifier && !$this.hasAccessTo("Content.ChangeAccessRights", "$protectedContentId"))
						#set($isProtectedReadonly = "disabled")
						<input type="hidden" name="isProtected" value="$!isProtected"/> 
					#end
					$ui.getString("entity.Content.isProtected.label")<br>
					<input type="radio" name="isProtected" value="0" #if($!isProtected == 0) checked="1" #end $disabled $isProtectedReadonly> $ui.getString("tool.common.no") 
					<input type="radio" name="isProtected" value="1" #if($!isProtected == 1) checked="1" #end $disabled $isProtectedReadonly> $ui.getString("tool.common.yes")
					<input type="radio" name="isProtected" value="2" #if($!isProtected == 2) checked="1" #end $disabled $isProtectedReadonly> $ui.getString("tool.common.inherit")
				</p>		
				
				#if(!$contentVO.contentTypeDefinitionId)
				<p>
					$ui.getString("tool.contenttool.newContent.contentType")<br/>
					<select class="contenttypes" name="contentTypeDefinitionId">
					##if($isBranch)<option value="">Not defined yet</option>#end
					#foreach ($contentTypeDefinitionVO in $contentTypeDefinitions)
						#if($isBranch && $defaultFolderContentTypeName == $contentTypeDefinitionVO.getName())
							<option value="$contentTypeDefinitionVO.getContentTypeDefinitionId()" selected="1">$contentTypeDefinitionVO.getName()</option>
						#else
							<option value="$contentTypeDefinitionVO.getContentTypeDefinitionId()">$contentTypeDefinitionVO.getName()</option>
						#end
					#end
					</select>
				</p>
				#else
				<p>
					$ui.getString("tool.contenttool.contentTypeLabel") $contentTypeDefinition.getName()
				</p>			
				#end
				
		</div>
		
		#lightFooterToolbar($footerButtons)
		
	</form>
		

#endLightCommonToolV3()